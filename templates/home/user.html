{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The DIY Night</title>
    <link href="http://b.io/ext_4-" rel="stylesheet">
    <script src="{% static 'cart.js' %}"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #6daabd;
            text-decoration: none;
        }
        
        .nav {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .nav-item {
            font-size: 18px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px 15px;
            border-radius: 5px;
            color: #333;
            text-decoration: none;
        }
        
        .nav-item:hover {
            color: #6daabd;
            background-color: #f0f0f0;
        }
        
        .cart-icon {
            position: relative;
            display: inline-block;
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff6b6b;
            color: #fff;
            font-size: 12px;
            font-weight: bold;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .main-content {
            background-color: #6daabd;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .search-bar {
            display: flex;
            margin-bottom: 30px;
        }
        .search-input {
            flex-grow: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 25px 0 0 25px;
            font-size: 16px;
        }
        .search-button {
            padding: 12px 25px;
            background-color: #fdfdfd;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .search-button:hover {
            background-color: #e0e0e0;
        }
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }
        .product-card {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .product-image {
            background-color: #f0f0f0;
            height: 200px;
            border-radius: 10px;
            margin-bottom: 15px;
            background-size: cover;
            background-position: center;
            overflow: hidden;
        }
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }
        .product-name {
            font-style: italic;
            margin-bottom: 15px;
            font-size: 18px;
            color: #333;
            flex-grow: 1;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .product-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        .product-price {
            font-weight: bold;
            font-size: 18px;
        }
        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .rating-stars {
            display: inline-block;
            font-size: 16px;
            color: #ffd700;
            cursor: pointer;
        }
        .add-to-cart {
            background-color: #6daabd;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 15px;
            width: 100%;
            font-size: 16px;
        }
        .add-to-cart:hover {
            background-color: #5a91a1;
        }
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 15px;
        }
        .quantity-btn {
            background-color: #f0f0f0;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .quantity-btn:hover {
            background-color: #e0e0e0;
        }
        .quantity {
            font-size: 18px;
        }
        .slogan {
            background-color: #fffdfd;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            font-style: italic;
            margin: 30px 0;
            font-size: 24px;
            color: #333;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .category-section {
            margin-top: 50px;
        }
        .category-title {
            font-size: 28px;
            color: #fff;
            margin-bottom: 20px;
        }
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }
        .category-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #333;
            transition: transform 0.3s ease;
        }
        .category-item:hover {
            transform: translateY(-5px);
        }
        .category-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .category-name {
            font-size: 16px;
            text-align: center;
        }
        .track-section {
            background-color: #fff;
            border-radius: 15px;
            padding: 30px;
            margin-top: 50px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .track-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }
        .track-form {
            display: flex;
            gap: 15px;
        }
        .track-input {
            flex-grow: 1;
            padding: 12px 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .track-button {
            padding: 12px 25px;
            background-color: #6daabd;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .track-button:hover {
            background-color: #5a91a1;
        }
        .track-result {
            margin-top: 30px;
            display: none;
        }
        .track-status {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .track-details {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
        }
        .track-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .track-item:last-child {
            border-bottom: none;
        }
        .order-history-section {
            background-color: #fff;
            border-radius: 15px;
            padding: 30px;
            margin-top: 50px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .order-history-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }
        .order-history-list {
            list-style-type: none;
            padding: 0;
        }
        .order-history-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
        }
        .order-history-item:last-child {
            border-bottom: none;
        }
        .order-number {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .order-date {
            color: #666;
            font-size: 14px;
        }
        .order-total {
            font-weight: bold;
            color: #6daabd;
        }
        .user-profile-section {
            background-color: #fff;
            border-radius: 15px;
            padding: 30px;
            margin-top: 50px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .user-profile-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }
        .user-profile-form {
            display: grid;
            gap: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-label {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .form-input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .form-button {
            padding: 12px 25px;
            background-color: #6daabd;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .form-button:hover {
            background-color: #5a91a1;
        }
        .cart-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }
        .cart-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
        }
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .close-cart {
            font-size: 24px;
            cursor: pointer;
        }
        .cart-items {
            max-height: 300px;
            overflow-y: auto;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .cart-item-details {
            flex-grow: 1;
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .cart-quantity-btn {
            background-color: #f0f0f0;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .cart-quantity-btn:hover {
            background-color: #e0e0e0;
        }
        .cart-item-remove {
            background-color: #ff6b6b;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .cart-item-remove:hover {
            background-color: #ff5252;
        }
        .cart-total {
            margin-top: 20px;
            text-align: right;
            font-weight: bold;
        }
        .checkout-btn {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #6daabd;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        .checkout-btn:hover {
            background-color: #5a91a1;
        }
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            .nav {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            }
            .track-form {
                flex-direction: column;
            }
            .track-button {
                width: 100%;
            }
        }
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            .header {
                padding: 15px;
            }
            .logo {
                font-size: 24px;
            }
            .nav {
                flex-wrap: wrap;
                gap: 10px;
            }
            .nav-item {
                font-size: 16px;
                padding: 8px 12px;
            }
            .main-content {
                padding: 20px;
            }
            .search-input, .search-button {
                font-size: 14px;
                padding: 10px 15px;
            }
            .product-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .product-card {
                padding: 15px;
            }
            .product-image {
                height: 180px;
            }
            .product-name {
                font-size: 16px;
            }
            .product-details {
                flex-direction: column;
                align-items: flex-start;
            }
            .product-price {
                margin-bottom: 5px;
            }
            .add-to-cart {
                margin-top: 10px;
            }
            .slogan {
                font-size: 18px;
                padding: 20px;
            }
            .category-title {
                font-size: 20px;
            }
            .category-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            .category-icon {
                width: 80px;
                height: 80px;
            }
            .category-name {
                font-size: 14px;
            }
            .track-title {
                font-size: 20px;
            }
            .track-input, .track-button {
                font-size: 14px;
            }
            .track-status {
                font-size: 16px;
            }
            .track-item {
                flex-direction: column;
            }
            .order-history-title, .user-profile-title {
                font-size: 20px;
            }
            .form-input, .form-button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <a href="/" class="logo">@thediynight</a>
            <nav class="nav">
                <a href="/" class="nav-item">Shop</a>
                <a href="track" class="nav-item">Track</a>
                <a href="user" class="nav-item">User</a>
                <div class="cart-icon">
                    <button class="nav-item" id="cart-btn">Cart</button>
                    <span class="cart-count">0</span>
                </div>
            </nav>
        </header>
        <main class="main-content">
            <form class="search-bar">
                <input type="text" class="search-input" placeholder="Search products" aria-label="Search products">
                <button type="submit" class="search-button" aria-label="Submit search">Search</button>
            </form>
            <div class="product-grid" id="product-grid">
                {% for product in products %}
                <article class="product-card">
                    <div class="product-image">
                        <a href="{% url 'prodd' product.slug %}">
                            {% for image in product.product_image.all %}
                            <img src="{{ image.image.url }}" alt="{{ product.product_name }}">
                            {% endfor %}
                        </a>
                    </div>
                    <h3 class="product-name">{{ product.product_name }}</h3>
                    <div class="product-details">
                        <span class="product-price">${{ product.price }}</span>
                        <div class="product-rating">
                            <span class="rating-stars" data-rating="4.5" data-product="{{ product.product_name }}">★★★★☆</span>
                            <span class="rating-value">4.5</span>
                        </div>
                    </div>
                    <div class="quantity-control">
                        <button class="quantity-btn minus" data-product="{{ product.product_name }}">-</button>
                        <span class="quantity">0</span>
                        <button class="quantity-btn plus" data-product="{{ product.product_name }}">+</button>
                    </div>
                    <button class="add-to-cart" data-product="{{ product.product_name }}" data-price="{{ product.price }}">Add to Cart</button>
                </article>
                {% endfor %}
            </div>
            <div class="slogan">Crafted with Care, Shaping Stories</div>
            <section class="category-section">
                <h2 class="category-title">BROWSE CATEGORIES</h2>
                <div class="category-grid">
                    {% for category in categories %}
                    <a href="{% url 'category_detail' category.slug %}" class="category-item">
                        <div class="category-icon" style="background-image: url('{{ category.category_image.url }}');"></div>
                        <span class="category-name">{{ category.category_name }}</span>
                    </a>
                    {% endfor %}
                </div>
            </section>
            <section class="track-section">
                <h2 class="track-title">Track Your Order</h2>
                <form class="track-form" id="track-form">
                    <input type="text" class="track-input" placeholder="Enter your order number" required>
                    <button type="submit" class="track-button">Track</button>
                </form>
                <div class="track-result" id="track-result">
                    <p class="track-status">Order Status: <span id="order-status"></span></p>
                    <div class="track-details" id="track-details"></div>
                </div>
            </section>
            <section class="order-history-section">
                {% for order in orders %}
                <div class="order">
                    <p>Order ID: {{ order.id }}</p>
                    <p>Date: {{ order.created_at }}</p>
                    <p>Total: {{ order.total_price }}</p>
                    <ul>
                        {% for item in order.items.all %}
                            <li>{{ item.product.name }} - {{ item.quantity }} x {{ item.price }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
            </section>
            <section class="user-profile-section">
                <h2 class="user-profile-title">User Profile</h2>
                <form class="user-profile-form" id="user-profile-form">
                    <div class="form-group">
                        <label for="user-name" class="form-label">Name</label>
                        <input type="text" id="user-name" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="user-email" class="form-label">Email</label>
                        <input type="email" id="user-email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password" class="form-label">Change Password</label>
                        <input type="password" id="user-password" class="form-input">
                    </div>
                    <button type="submit" class="form-button">Update Profile</button>
                </form>
            </section>
        </main>
    </div>
   <!-- Cart Modal -->
   <div id="cart-modal" class="cart-modal" style="display: none;">
    <div class="cart-content">
        <span id="close-cart" class="close">&times;</span>
        <h2>Your Cart</h2>
        <div id="cart-items" class="cart-items"></div>
        <div id="cart-total" class="cart-total">Total: $0.00</div>
        <button id="checkout-btn" class="checkout-btn">Checkout</button>
    </div>
</div>

   
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const productGrid = document.getElementById("product-grid");
            const productCards = productGrid.querySelectorAll(".product-card");
            let currentIndex = 0;

            function showNextProductSet() {
                productCards.forEach(card => {
                    card.style.display = "none";
                });

                let displayedCount = 0;
                while (displayedCount < 4 && currentIndex < productCards.length) {
                    productCards[currentIndex].style.display = "flex";
                    currentIndex++;
                    displayedCount++;
                }

                if (currentIndex >= productCards.length) {
                    currentIndex = 0;
                }
            }

            showNextProductSet();
            setInterval(showNextProductSet, 7000);

            const cartBtn = document.getElementById("cart-btn");
            const cartModal = document.getElementById("cart-modal");
            const closeCart = document.getElementById("close-cart");
            const cartItems = document.getElementById("cart-items");
            const cartTotal = document.getElementById("cart-total");
            let cart = {};

            cartBtn.addEventListener("click", () => {
                cartModal.style.display = "block";
                updateCartDisplay();
            });

            closeCart.addEventListener("click", () => {
                cartModal.style.display = "none";
            });

            window.addEventListener("click", (event) => {
                if (event.target === cartModal) {
                    cartModal.style.display = "none";
                }
            });

            productGrid.addEventListener("click", (event) => {
                if (event.target.classList.contains("add-to-cart")) {
                    const product = event.target.dataset.product;
                    const price = parseFloat(event.target.dataset.price);
                    addToCart(product, price);
                } else if (event.target.classList.contains("quantity-btn")) {
                    const product = event.target.dataset.product;
                    const isPlus = event.target.classList.contains("plus");
                    updateQuantity(product, isPlus);
                }
            });

            function addToCart(product, price) {
                if (cart[product]) {
                    cart[product].quantity++;
                } else {
                    cart[product] = { quantity: 1, price: price };
                }
                updateCartDisplay();
            }

            function updateQuantity(product, isPlus) {
                const quantityElement = event.target.parentElement.querySelector(".quantity");
                let quantity = parseInt(quantityElement.textContent);
                
                if (isPlus) {
                    quantity++;
                } else if (quantity > 0) {
                    quantity--;
                }
                
                quantityElement.textContent = quantity;
                
                if (cart[product]) {
                    cart[product].quantity = quantity;
                    if (quantity === 0) {
                        delete cart[product];
                    }
                }
                
                updateCartDisplay();
            }

            function updateCartDisplay() {
                cartItems.innerHTML = "";
                let total = 0;
                
                for (const [product, details] of Object.entries(cart)) {
                    const itemTotal = details.quantity * details.price;
                    total += itemTotal;
                    
                    const cartItem = document.createElement("div");
                    cartItem.classList.add("cart-item");
                    cartItem.innerHTML = `
                        <div class="cart-item-details">
                            <h3>${product}</h3>
                            <p>$${details.price.toFixed(2)} x ${details.quantity}</p>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="cart-quantity-btn minus" data-product="${product}">-</button>
                            <span>${details.quantity}</span>
                            <button class="cart-quantity-btn plus" data-product="${product}">+</button>
                        </div>
                        <button class="cart-item-remove" data-product="${product}">Remove</button>
                    `;
                    cartItems.appendChild(cartItem);
                }
                
                cartTotal.textContent = total.toFixed(2);
            }

            cartItems.addEventListener("click", (event) => {
                const product = event.target.dataset.product;
                if (event.target.classList.contains("cart-quantity-btn")) {
                    const isPlus = event.target.classList.contains("plus");
                    updateQuantity(product, isPlus);
                } else if (event.target.classList.contains("cart-item-remove")) {
                    delete cart[product];
                    updateCartDisplay();
                }
            });

            const ratingStars = document.querySelectorAll(".rating-stars");
            ratingStars.forEach(stars => {
                stars.addEventListener("click", () => {
                    const product = stars.dataset.product;
                    const currentRating = parseFloat(stars.dataset.rating);
                    const newRating = Math.min(currentRating + 0.5, 5);
                    stars.dataset.rating = newRating;
                    stars.textContent = "★".repeat(Math.floor(newRating)) + "☆".repeat(5 - Math.floor(newRating));
                    stars.nextElementSibling.textContent = newRating.toFixed(1);
                });
            });

            const trackForm = document.getElementById("track-form");
            const trackResult = document.getElementById("track-result");
            const orderStatus = document.getElementById("order-status");
            const trackDetails = document.getElementById("track-details");

            trackForm.addEventListener("submit", (event) => {
                event.preventDefault();
                const orderNumber = trackForm.querySelector(".track-input").value;
                
                setTimeout(() => {
                    const status = "In Transit";
                    const details = [
                        { date: "2023-05-01", status: "Order Placed" },
                        { date: "2023-05-02", status: "Order Processed" },
                        { date: "2023-05-03", status: "Shipped" },
                        { date: "2023-05-05", status: "In Transit" }
                    ];
                    
                    orderStatus.textContent = status;
                    trackDetails.innerHTML = details.map(detail => `
                        <div class="track-item">
                            <span>${detail.date}</span>
                            <span>${detail.status}</span>
                        </div>
                    `).join("");
                    
                    trackResult.style.display = "block";
                }, 1000);
            });

            const orderHistoryList = document.getElementById("order-history-list");
            const mockOrderHistory = [
                { number: "ORD-001", date: "2023-05-01", total: 150.99 },
                { number: "ORD-002", date: "2023-04-15", total: 89.50 },
                { number: "ORD-003", date: "2023-03-30", total: 210.75 }
            ];

            mockOrderHistory.forEach(order => {
                const li = document.createElement("li");
                li.classList.add("order-history-item");
                li.innerHTML = `
                    <span class="order-number">${order.number}</span>
                    <span class="order-date">${order.date}</span>
                    <span class="order-total">$${order.total.toFixed(2)}</span>
                `;
                orderHistoryList.appendChild(li);
            });

            const userProfileForm = document.getElementById("user-profile-form");
            const userName = document.getElementById("user-name");
            const userEmail = document.getElementById("user-email");
            const userPassword = document.getElementById("user-password");

            userProfileForm.addEventListener("submit", (event) => {
                event.preventDefault();
                const updatedProfile = {
                    name: userName.value,
                    email: userEmail.value,
                    password: userPassword.value
                };
                console.log("Updated profile:", updatedProfile);
                alert("Profile updated successfully!");
            });
        });

        document.addEventListener("DOMContentLoaded", function() {
            const cartBtn = document.getElementById("cart-btn");
            const cartModal = document.getElementById("cart-modal");
            const closeCart = document.getElementById("close-cart");
            const cartItems = document.getElementById("cart-items");
            const cartTotal = document.getElementById("cart-total");
            
            // Load cart from local storage
            let cart = JSON.parse(localStorage.getItem('cart')) || {};
        
            // Open Cart Modal
            cartBtn.addEventListener("click", () => {
                cartModal.style.display = "block";
                updateCartDisplay();
            });
        
            // Close Cart Modal
            closeCart.addEventListener("click", () => {
                cartModal.style.display = "none";
            });
        
            // Close Cart Modal when clicking outside of the modal
            window.addEventListener("click", (event) => {
                if (event.target === cartModal) {
                    cartModal.style.display = "none";
                }
            });
        
            // Function to update the cart display
            function updateCartDisplay() {
                cartItems.innerHTML = "";
                let total = 0;
        
                for (const [product, details] of Object.entries(cart)) {
                    const itemTotal = details.quantity * details.price;
                    total += itemTotal;
        
                    const cartItem = document.createElement("div");
                    cartItem.classList.add("cart-item");
                    cartItem.innerHTML = `
                        <div class="cart-item-details">
                            <h3>${product}</h3>
                            <p>Price: Rs.${details.price.toFixed(2)}</p>
                            <p>Quantity: ${details.quantity}</p>
                            <p>Total: Rs.${itemTotal.toFixed(2)}</p>
                        </div>
                        <button class="cart-item-remove" data-product="${product}">Remove</button>
                    `;
                    cartItems.appendChild(cartItem);
                }
        
                cartTotal.textContent = `Total: Rs.${total.toFixed(2)}`;
            }
        
            // Remove item from cart
            cartItems.addEventListener("click", (event) => {
                if (event.target.classList.contains("cart-item-remove")) {
                    const product = event.target.dataset.product;
                    delete cart[product];
                    saveCart();
                    updateCartDisplay();
                }
            });
        
            // Function to save the cart to local storage
            function saveCart() {
                localStorage.setItem('cart', JSON.stringify(cart));
            }
        
            // Initial cart update
            updateCartDisplay();
        });
    </script>
</body>
</html>